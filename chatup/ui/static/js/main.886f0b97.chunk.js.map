{"version":3,"sources":["settings.js","store/actions/auth.js","store/actions/actionTypes.js","containers/Login.js","containers/Signup.js","hoc/hoc.js","websocket.js","containers/Chat.js","containers/Home.js","containers/Profile.js","routes.js","containers/Layout.js","App.js","store/actions/message.js","serviceWorker.js","store/utility.js","store/reducers/message.js","store/reducers/auth.js","index.js"],"names":["HOST_URL","SOCKET_URL","authSuccess","token","username","watchtime","userID","username_color","roleID","type","authFail","error","logout","axios","defaults","xsrfHeaderName","xsrfCookieName","get","withCredentials","headers","then","localStorage","clear","LoginForm","state","password","handleChange","e","setState","target","name","value","handleSubmit","preventDefault","props","login","this","loading","to","Grid","textAlign","style","height","verticalAlign","Column","maxWidth","Header","as","color","message","Fragment","Form","size","onSubmit","Segment","stacked","Input","onChange","fluid","icon","iconPosition","placeholder","Button","disabled","Message","React","Component","connect","auth","dispatch","post","credentials","res","setItem","data","id","role","catch","err","authLogin","RegistrationForm","email","password1","password2","signup","authSignup","Hoc","children","WebSocketService","callbacks","socketRef","instance","chatUrl","path","WebSocket","onopen","console","log","onmessage","socketNewMessage","onerror","onclose","close","parsedData","JSON","parse","chatId","sendMessage","command","content","messagesCallback","newMessageCallback","send","stringify","readyState","WebSocketInstance","getInstance","Chat","messageChangeHandler","event","sendMessageHandler","messageObject","newChatMessage","renderMessages","messages","map","i","arr","List","Item","key","Image","avatar","src","Content","Description","scrollToBottom","messagesEnd","scrollIntoView","behavior","initialiseChat","waitForSocketConnection","callback","component","setTimeout","className","relaxed","href","float","ref","el","required","HomepageLayout","undefined","divided","celled","GridRow","GridColumn","width","compact","poster","url","autoplay","controls","roles","3","2","4","1","Profile","alt","BaseRouter","Login","Signup","exact","render","window","location","CustomLayout","authenticated","Menu","fixed","inverted","Container","header","position","onClick","vertical","margin","padding","withRouter","App","addCallbacks","setMessages","bind","addMessage","isAuthenticated","onTryAutoSignup","getItem","setProfile","actions","messageActions","Boolean","hostname","match","updateObject","oldObject","updatedProperties","initialState","chats","wallet","action","setChats","reducer","authStart","authLogout","authUpdate","composeEnhances","__REDUX_DEVTOOLS_EXTENSION_COMPOSE__","compose","rootReducer","combineReducers","authReducer","messageReducer","store","createStore","applyMiddleware","thunk","app","ReactDOM","document","getElementById","navigator","serviceWorker","ready","registration","unregister"],"mappings":"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","file":"static/js/main.886f0b97.chunk.js","sourcesContent":["let DEBUG = true;\nlet HOST_URL = \"http://127.0.0.1:8000\";\nlet SOCKET_URL = \"ws://127.0.0.1:8000\";\nif (DEBUG) {\n  HOST_URL = \"https://chatup-vezaks.herokuapp.com\";\n  SOCKET_URL = \"wss://chatup-vezaks.herokuapp.com\";\n}\n\nexport { HOST_URL, SOCKET_URL };","import axios from 'axios';\nimport * as actionTypes from './actionTypes';\nimport { HOST_URL } from '../../settings';\n\n\nexport const authStart = () => {\n  return {\n    type: actionTypes.AUTH_START\n  }\n};\n\nexport const authUpdate = (username, watchtime, username_color) => {\n  return {\n    type: actionTypes.AUTH_UPDATE,\n    username: username,\n    watchtime: watchtime,\n    username_color: username_color,\n  };\n};\n\nexport const authSuccess = (token, username, watchtime, userID, username_color, roleID) => {\n  return {\n    type: actionTypes.AUTH_SUCCESS,\n    token: token,\n    username: username,\n    watchtime: watchtime,\n    userID: userID,\n    username_color: username_color,\n    roleID: roleID\n  }\n};\n\nexport const authFail = error => {\n  return {\n    type: actionTypes.AUTH_FAIL,\n    error: error\n  }\n};\n\nexport const logout = () => {\n  axios.defaults.xsrfHeaderName = \"X-CSRFTOKEN\";\n  axios.defaults.xsrfCookieName = \"csrftoken\";\n  axios.get(`${HOST_URL}/api/auth/logout/`, {withCredentials:true, headers: {\n      \"Content-Type\": \"application/json\"\n    }})\n    .then(() => {\n      localStorage.clear();\n    });\n\n  return {\n    type: actionTypes.AUTH_LOGOUT\n  };\n};\n\nexport const authLogin = (username, password) => {\n  return dispatch => {\n    dispatch(authStart());\n    axios.defaults.xsrfHeaderName = \"X-CSRFTOKEN\";\n    axios.defaults.xsrfCookieName = \"csrftoken\";\n    axios.post(`${HOST_URL}/api/auth/login/`, {\n      username: username,\n      password: password\n    }, {credentials: \"include\", withCredentials: true})\n      .then(() => {\n        const token = \"true\";\n\n        axios.get(`${HOST_URL}/api/general/user/`, {withCredentials:true, headers: {\n            \"Content-Type\": \"application/json\"\n          }})\n          .then(res => {\n            localStorage.setItem('token', token);\n            localStorage.setItem('username', res.data.username);\n            localStorage.setItem('watchtime', res.data.watchtime);\n            localStorage.setItem('userID', res.data.id);\n            localStorage.setItem('username_color', res.data.username_color);\n            localStorage.setItem('roleID', res.data.role);\n\n\n            const username = res.data.username;\n            const watchtime = res.data.watchtime;\n            const userID = res.data.id;\n            const username_color = res.data.username_color;\n            const roleID = res.data.role;\n\n            dispatch(authSuccess(token, username, watchtime, userID, username_color, roleID));\n          });\n      })\n      .catch(err => {\n        dispatch(authFail(err))\n      })\n  }\n};\n\nexport const authSignup = (username, email, password1, password2) => {\n  return dispatch => {\n    dispatch(authStart());\n    axios.defaults.xsrfHeaderName = \"X-CSRFTOKEN\";\n    axios.defaults.xsrfCookieName = \"csrftoken\";\n    axios.post(`${HOST_URL}/api/auth/signup/`, {\n      username: username,\n      email: email,\n      password1: password1,\n      password2: password2\n    }, {credentials: \"include\", withCredentials: true})\n      .then(() => {\n        const token = \"true\";\n\n        axios.get(`${HOST_URL}/api/general/user/`, {withCredentials:true, headers: {\n            \"Content-Type\": \"application/json\"\n          }})\n          .then(res => {\n            localStorage.setItem('token', token);\n            localStorage.setItem('username', res.data.username);\n            localStorage.setItem('watchtime', res.data.watchtime);\n            localStorage.setItem('userID', res.data.id);\n            localStorage.setItem('username_color', res.data.username_color);\n            localStorage.setItem('roleID', res.data.role);\n\n\n            const username = res.data.username;\n            const watchtime = res.data.watchtime;\n            const userID = res.data.id;\n            const username_color = res.data.username_color;\n            const roleID = res.data.role;\n\n            dispatch(authSuccess(token, username, watchtime, userID, username_color, roleID));\n          });\n      })\n      .catch(err => {\n        dispatch(authFail(err))\n      })\n  }\n};\n\nexport const authCheckState = () => {\n  return dispatch => {\n    const token = localStorage.getItem('token');\n    const username = localStorage.getItem('username');\n    const watchtime = localStorage.getItem('watchtime');\n    const userID = localStorage.getItem('userID');\n    const username_color = localStorage.getItem('username_color');\n    const roleID = localStorage.getItem('roleID');\n\n    if (token === undefined) {\n      dispatch(logout());\n    } else {\n      dispatch(authSuccess(token, username, watchtime, userID, username_color, roleID));\n    }\n  }\n};","export const AUTH_START = 'AUTH_START';\nexport const AUTH_SUCCESS = 'AUTH_SUCCESS';\nexport const AUTH_FAIL = 'AUTH_FAIL';\nexport const AUTH_LOGOUT = 'AUTH_LOGOUT';\n\nexport const AUTH_UPDATE = \"AUTH_UPDATE\";\n\nexport const OPEN_ADD_CHAT_POPUP = \"OPEN_ADD_CHAT_POPUP\";\nexport const CLOSE_ADD_CHAT_POPUP = \"CLOSE_ADD_CHAT_POPUP\";\nexport const ADD_MESSAGE = \"ADD_MESSAGE\";\nexport const SET_MESSAGES = \"SET_MESSAGES\";\nexport const GET_CHATS_SUCCESS = \"GET_CHATS_SUCCESS\";","import React from \"react\";\nimport {\n  Button,\n  Form,\n  Grid,\n  Header,\n  Message,\n  Segment\n} from \"semantic-ui-react\";\nimport { connect } from \"react-redux\";\nimport { NavLink, Redirect } from \"react-router-dom\";\nimport { authLogin } from \"../store/actions/auth\";\n\nclass LoginForm extends React.Component {\n  state = {\n    username: \"\",\n    password: \"\"\n  };\n\n  handleChange = e => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    const { username, password } = this.state;\n    this.props.login(username, password);\n  };\n\n  render() {\n    const { error, loading, token } = this.props;\n    const { username, password } = this.state;\n    if (token) {\n      return <Redirect to=\"/\" />;\n    }\n    return (\n      <Grid\n        textAlign=\"center\"\n        style={{ height: \"100vh\" }}\n        verticalAlign=\"middle\"\n      >\n        <Grid.Column style={{ maxWidth: 450 }}>\n          <Header as=\"h2\" color=\"teal\" textAlign=\"center\">\n            Log-in to your account\n          </Header>\n          {error && <p>{this.props.error.message}</p>}\n\n          <React.Fragment>\n            <Form size=\"large\" onSubmit={this.handleSubmit}>\n              <Segment stacked>\n                <Form.Input\n                  onChange={this.handleChange}\n                  value={username}\n                  name=\"username\"\n                  fluid\n                  icon=\"user\"\n                  iconPosition=\"left\"\n                  placeholder=\"Username\"\n                />\n                <Form.Input\n                  onChange={this.handleChange}\n                  fluid\n                  value={password}\n                  name=\"password\"\n                  icon=\"lock\"\n                  iconPosition=\"left\"\n                  placeholder=\"Password\"\n                  type=\"password\"\n                />\n\n                <Button\n                  color=\"teal\"\n                  fluid\n                  size=\"large\"\n                  loading={loading}\n                  disabled={loading}\n                >\n                  Login\n                </Button>\n              </Segment>\n            </Form>\n            <Message>\n              New to us? <NavLink to=\"/signup\">Sign Up</NavLink>\n            </Message>\n          </React.Fragment>\n        </Grid.Column>\n      </Grid>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    loading: state.auth.loading,\n    error: state.auth.error,\n    token: state.auth.token\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    login: (username, password) => dispatch(authLogin(username, password))\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(LoginForm);\n\n\n\n","import React from \"react\";\nimport {\n  Button,\n  Form,\n  Grid,\n  Header,\n  Message,\n  Segment\n} from \"semantic-ui-react\";\nimport { connect } from \"react-redux\";\nimport { NavLink, Redirect } from \"react-router-dom\";\nimport { authSignup } from \"../store/actions/auth\";\n\nclass RegistrationForm extends React.Component {\n  state = {\n    username: \"\",\n    email: \"\",\n    password1: \"\",\n    password2: \"\"\n  };\n\n  handleSubmit = e => {\n    e.preventDefault();\n    const { username, email, password1, password2 } = this.state;\n    this.props.signup(username, email, password1, password2);\n  };\n\n  handleChange = e => {\n    this.setState({ [e.target.name]: e.target.value });\n  };\n\n  render() {\n    const { username, email, password1, password2 } = this.state;\n    const { error, loading, token } = this.props;\n    if (token) {\n      return <Redirect to=\"/\" />;\n    }\n    return (\n      <Grid\n        textAlign=\"center\"\n        style={{ height: \"100vh\" }}\n        verticalAlign=\"middle\"\n      >\n        <Grid.Column style={{ maxWidth: 450 }}>\n          <Header as=\"h2\" color=\"teal\" textAlign=\"center\">\n            Signup to your account\n          </Header>\n          {error && <p>{this.props.error.message}</p>}\n\n          <React.Fragment>\n            <Form size=\"large\" onSubmit={this.handleSubmit}>\n              <Segment stacked>\n                <Form.Input\n                  onChange={this.handleChange}\n                  value={username}\n                  name=\"username\"\n                  fluid\n                  icon=\"user\"\n                  iconPosition=\"left\"\n                  placeholder=\"Username\"\n                />\n                <Form.Input\n                  onChange={this.handleChange}\n                  value={email}\n                  name=\"email\"\n                  fluid\n                  icon=\"mail\"\n                  iconPosition=\"left\"\n                  placeholder=\"E-mail address\"\n                />\n                <Form.Input\n                  onChange={this.handleChange}\n                  fluid\n                  value={password1}\n                  name=\"password1\"\n                  icon=\"lock\"\n                  iconPosition=\"left\"\n                  placeholder=\"Password\"\n                  type=\"password\"\n                />\n                <Form.Input\n                  onChange={this.handleChange}\n                  fluid\n                  value={password2}\n                  name=\"password2\"\n                  icon=\"lock\"\n                  iconPosition=\"left\"\n                  placeholder=\"Confirm password\"\n                  type=\"password\"\n                />\n\n                <Button\n                  color=\"teal\"\n                  fluid\n                  size=\"large\"\n                  loading={loading}\n                  disabled={loading}\n                >\n                  Signup\n                </Button>\n              </Segment>\n            </Form>\n            <Message>\n              Already have an account? <NavLink to=\"/login\">Login</NavLink>\n            </Message>\n          </React.Fragment>\n        </Grid.Column>\n      </Grid>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    loading: state.auth.loading,\n    error: state.auth.error,\n    token: state.auth.token\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    signup: (username, email, password1, password2) =>\n      dispatch(authSignup(username, email, password1, password2))\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(RegistrationForm);","const Hoc = props => props.children;\n\nexport default Hoc;","import { SOCKET_URL } from \"./settings\";\n\nclass WebSocketService {\n  static instance = null;\n  callbacks = {};\n\n  static getInstance() {\n    if (!WebSocketService.instance) {\n      WebSocketService.instance = new WebSocketService();\n    }\n    return WebSocketService.instance;\n  }\n\n  constructor() {\n    this.socketRef = null;\n  }\n\n  connect(chatUrl) {\n    const path = `${SOCKET_URL}/api/ws/rooms/${chatUrl}/`;\n    this.socketRef = new WebSocket(path);\n    this.socketRef.onopen = () => {\n      console.log(\"WebSocket open\");\n    };\n    this.socketRef.onmessage = e => {\n      this.socketNewMessage(e.data);\n    };\n    this.socketRef.onerror = e => {\n      console.log(e.message);\n    };\n    this.socketRef.onclose = () => {\n      console.log(\"WebSocket closed let's reopen\");\n      this.connect();\n    };\n  }\n\n  disconnect() {\n    this.socketRef.close();\n  }\n\n  socketNewMessage(data) {\n    const parsedData = JSON.parse(data);\n    this.callbacks[\"new_message\"](parsedData.message);\n  }\n\n  fetchMessages(username, chatId) {\n    this.sendMessage({\n      command: \"fetch_messages\",\n      username: username,\n      chatId: chatId\n    });\n  }\n\n  newChatMessage(message) {\n    this.sendMessage({\n      message: message.content\n    });\n  }\n\n  addCallbacks(messagesCallback, newMessageCallback) {\n    this.callbacks[\"messages\"] = messagesCallback;\n    this.callbacks[\"new_message\"] = newMessageCallback;\n  }\n\n  sendMessage(data) {\n    try {\n      this.socketRef.send(JSON.stringify({ ...data }));\n    } catch (err) {\n      console.log(err.message);\n    }\n  }\n\n  state() {\n    return this.socketRef.readyState;\n  }\n}\n\nconst WebSocketInstance = WebSocketService.getInstance();\n\nexport default WebSocketInstance;","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport Hoc from \"../hoc/hoc\";\nimport { Input, List, Image } from 'semantic-ui-react'\nimport WebSocketInstance from \"../websocket\";\n\nclass Chat extends React.Component {\n  state = { message: \"\" };\n\n  initialiseChat() {\n    this.waitForSocketConnection(() => {\n      // fetch messages\n    });\n    WebSocketInstance.connect('test');\n  }\n\n  constructor(props) {\n    super(props);\n    this.initialiseChat();\n  }\n\n  waitForSocketConnection(callback) {\n    const component = this;\n    setTimeout(function() {\n      if (WebSocketInstance.state() === 1) {\n        console.log(\"Connection is made\");\n        callback();\n        return;\n      } else {\n        console.log(\"wait for connection...\");\n        component.waitForSocketConnection(callback);\n      }\n    }, 100);\n  }\n\n  messageChangeHandler = event => {\n    this.setState({ message: event.target.value });\n  };\n\n  sendMessageHandler = e => {\n    e.preventDefault();\n    const messageObject = {\n      content: this.state.message,\n      chatId: 'test'\n    };\n    WebSocketInstance.newChatMessage(messageObject);\n    this.setState({ message: \"\" });\n  };\n\n  renderMessages = messages => {\n    // const currentUser = this.props.username;\n    return messages.map((message, i, arr) => (\n      <List.Item key={i}>\n        <Image avatar src='https://static-cdn.jtvnw.net/jtv_user_pictures/panel-148316617-image-3036e147-20a6-490c-ae31-9cfa6cdd73ad' />\n        <List.Content>\n          <List.Header as='a'>TEST</List.Header>\n          <List.Description>\n            {message}\n            <br />\n          </List.Description>\n        </List.Content>\n      </List.Item>\n\n\n    ));\n  };\n\n  scrollToBottom = () => {\n    this.messagesEnd.scrollIntoView({ behavior: \"smooth\" });\n  };\n\n  componentDidMount() {\n    this.scrollToBottom();\n  }\n\n  componentDidUpdate() {\n    this.scrollToBottom();\n  }\n\n  render() {\n    return (\n      <Hoc>\n        <div className=\"messages\">\n\n          <List relaxed>\n            <List.Item>\n              <Image avatar src='data:image/png;base64,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' />\n              <List.Content>\n                <List.Header as='a'>{this.props.username ? (this.props.username) : (\"Unknown\")}</List.Header>\n                <List.Description>\n                  Как вам{' '}\n                  <a href={\"https://react.semantic-ui.com/\"}>\n                    <b>Semantic UI React</b>\n                  </a>?\n                  Вроде ничего.\n                </List.Description>\n              </List.Content>\n            </List.Item>\n\n            <List.Item>\n              <Image avatar src='https://static-cdn.jtvnw.net/badges/v1/b817aba4-fad8-49e2-b88a-7cc744dfa6ec/3' />\n              <List.Content>\n                <List.Header as='a'>marstvi</List.Header>\n                <List.Description>\n                  Мне больше нравится {' '}\n                  <a href={\"https://material-ui.com/ru//\"}>\n                    <b>Material-UI</b></a> или тот же{' '}\n                  <a href={\"https://github.com/react-bootstrap/react-bootstrap\"}>\n                    <b>Bootstrap</b></a>.\n                </List.Description>\n              </List.Content>\n            </List.Item>\n\n            <List.Item>\n              <Image avatar src='https://encrypted-tbn0.gstatic.com/images?q=tbn%3AANd9GcTyxlcQ5PY2EARmYr40DfRwP7xwV-qhy3yMuA&usqp=CAU' />\n              <List.Content>\n                <List.Header as='a'>Max_of_Shadows</List.Header>\n                <List.Description>\n                  Неплохо бы поучить{' '}\n                  <a href={\"https://reactjs.org/\"}>\n                    <b>React</b></a>{', '}\n                  популярный фреймворк.\n                </List.Description>\n              </List.Content>\n            </List.Item>\n\n            <List.Item>\n              <Image avatar src='https://static-cdn.jtvnw.net/badges/v1/5527c58c-fb7d-422d-b71b-f309dcb85cc1/3' />\n              <Image avatar src='https://static-cdn.jtvnw.net/badges/v1/f9cc2879-ab6f-4c6a-94b9-5a414822b0dd/3' />\n              <List.Content>\n                <List.Header as='a'>Vezaks</List.Header>\n                <List.Description>\n                  Элитное сообщество.\n                </List.Description>\n              </List.Content>\n            </List.Item>\n\n          {this.props.messages && this.renderMessages(this.props.messages)}\n\n          </List>\n          <div\n            style={{ float: \"left\", clear: \"both\" }}\n            ref={el => {\n              this.messagesEnd = el;\n            }}\n          />\n\n        </div>\n        <div className=\"message-input\">\n          <form onSubmit={this.sendMessageHandler}>\n            <div className=\"wrap\">\n              <Input\n                onChange={this.messageChangeHandler}\n                value={this.state.message}\n                required\n                id=\"chat-message-input\"\n                type=\"text\"\n                placeholder=\"Write your message...\"\n                fluid={true}\n              />\n            </div>\n          </form>\n        </div>\n      </Hoc>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    username: state.auth.username,\n    messages: state.message.messages\n  };\n};\n\nexport default connect(mapStateToProps)(Chat);","import React from 'react'\nimport {connect} from \"react-redux\";\nimport {Redirect} from \"react-router-dom\";\nimport Chat from \"./Chat\";\nimport ReactHlsPlayer from 'react-hls-player'\nimport {\n  Grid,\n  GridColumn,\n  GridRow,\n  Segment\n} from 'semantic-ui-react'\n\n\nclass HomepageLayout extends React.Component {\n  render() {\n    if (this.props.token === undefined || this.props.token === null) {\n      return <Redirect to=\"/login\"/>;\n    }\n    return (\n      <div>\n        <br/><br/>\n        <Grid divided celled={true}>\n          <GridRow>\n            <GridColumn width={12}>\n              <Segment compact={false}>\n                <ReactHlsPlayer poster={\"https://sun9-35.userapi.com/c849532/v849532312/15082b/efNn97HREgo.jpg\"}\n                                url='//d2zihajmogu5jn.cloudfront.net/bipbop-advanced/bipbop_16x9_variant.m3u8'\n                                autoplay={false}\n                                controls={true}\n                                width={1370}\n                                height={800}\n                />\n              </Segment>\n            </GridColumn>\n            <GridColumn width={4}>\n              <Segment>\n                <Chat/>\n              </Segment>\n            </GridColumn>\n          </GridRow>\n        </Grid>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    token: state.auth.token\n  };\n};\n\nexport default connect(mapStateToProps)(HomepageLayout);","import React from \"react\";\nimport { connect } from \"react-redux\";\nimport { Redirect } from \"react-router-dom\";\nimport Hoc from \"../hoc/hoc\";\n\nconst roles = {\n  3: \"Администратор\",\n  2: \"Модератор\",\n  4: \"Стример\",\n  1: \"Пользователь\",\n}\n\nclass Profile extends React.Component {\n\n  render() {\n    if (this.props.token === undefined) {\n      return <Redirect to=\"/\" />;\n    }\n    return (\n      <div className=\"contact-profile\">\n        <br/><br/><br/>\n        {this.props.username !== null ? (\n          <Hoc>\n            <img src=\"https://static-cdn.jtvnw.net/jtv_user_pictures/panel-148316617-image-3036e147-20a6-490c-ae31-9cfa6cdd73ad\" alt=\"\" />\n            <p>User ID: {this.props.userID}</p>\n            <p>Username: {this.props.username}</p>\n            <p>Role: {roles[this.props.roleID]}</p>\n            <p>Watchtime: {this.props.watchtime}</p>\n            <p>Username color: {this.props.username_color}</p>\n          </Hoc>\n        ) : null}\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    username: state.auth.username,\n    watchtime: state.auth.watchtime,\n    username_color: state.auth.username_color,\n    userID: state.auth.userID,\n    roleID: state.auth.roleID,\n    token: state.auth.token\n  };\n};\n\nexport default connect(mapStateToProps)(Profile);","import React from 'react';\nimport { Route } from 'react-router-dom';\n\nimport Login from './containers/Login';\nimport Signup from './containers/Signup';\nimport HomepageLayout from './containers/Home';\nimport Profile from \"./containers/Profile\";\nimport Hoc from './hoc/hoc';\nimport { HOST_URL } from './settings';\n\nconst BaseRouter = () => (\n  <Hoc>\n    <Route path='/login' component={Login}/>\n    <Route path='/signup' component={Signup}/>\n    <Route exact path='/' component={HomepageLayout}/>\n    <Route exact path='/swagger/' render={() => (window.location = `${HOST_URL}/api/docs/`)} />\n    <Route exact path='/profile/' component={Profile}/>\n  </Hoc>\n);\n\nexport default BaseRouter;","import React from \"react\";\nimport {\n  Container,\n  Menu,\n  Segment\n} from \"semantic-ui-react\";\nimport { Link, withRouter } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport { logout } from \"../store/actions/auth\";\n\nconst roles = {\n  3: \"Администратор\",\n  2: \"Модератор\",\n  4: \"Стример\",\n  1: \"Пользователь\",\n}\n\nclass CustomLayout extends React.Component {\n\n  render() {\n    const { authenticated, username, roleID } = this.props;\n\n    return (\n      <div>\n        <Menu fixed=\"top\" inverted size={\"large\"}>\n          <Container>\n            {authenticated ? (\n              <React.Fragment>\n                <Link to=\"/\">\n                  <Menu.Item header>Home</Menu.Item>\n                </Link>\n                <Link to=\"/profile/\">\n                  <Menu.Item header>Profile</Menu.Item>\n                </Link>\n              </React.Fragment>\n            ) : (<Link to=\"/\">\n              <Menu.Item header>Home</Menu.Item>\n            </Link>)}\n            {authenticated ? (\n              <React.Fragment>\n\n                <Link to=\"/swagger/\">\n                  <Menu.Item header>API</Menu.Item>\n                </Link>\n\n              </React.Fragment>\n            ) : (\n              <React.Fragment>\n\n                <Link to=\"/swagger/\">\n                  <Menu.Item header>API</Menu.Item>\n                </Link>\n\n              </React.Fragment>\n            )}\n          </Container>\n\n          {authenticated ? (\n            <React.Fragment>\n              <Menu.Menu position={'right'}>\n                <Menu.Item>\n                  {username}\n                </Menu.Item>\n                <Menu.Item>\n                  {roles[roleID]}\n                </Menu.Item>\n                <Menu.Item header onClick={() => this.props.logout()}>\n                  Logout\n                </Menu.Item>\n              </Menu.Menu>\n            </React.Fragment>\n          ) : (\n            <React.Fragment>\n              <Link to=\"/login\">\n                <Menu.Item header>Login</Menu.Item>\n              </Link>\n              <Link to=\"/signup\">\n                <Menu.Item header>Signup</Menu.Item>\n              </Link>\n            </React.Fragment>\n          )}\n\n        </Menu>\n\n        {this.props.children}\n\n        <Segment\n          inverted\n          vertical\n          style={{ margin: \"0em 0em 0em\", padding: \"2.8em 0em\" }}\n        >\n        </Segment>\n      </div>\n    );\n  }\n}\n\nconst mapStateToProps = state => {\n  return {\n    authenticated: state.auth.token !== null,\n    username: state.auth.username,\n    roleID: state.auth.roleID\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    logout: () => dispatch(logout())\n  };\n};\n\nexport default withRouter(\n  connect(\n    mapStateToProps,\n    mapDispatchToProps\n  )(CustomLayout)\n);\n\n","import React, { Component } from \"react\";\nimport { BrowserRouter as Router } from \"react-router-dom\";\nimport { connect } from \"react-redux\";\nimport BaseRouter from \"./routes\";\nimport * as actions from \"./store/actions/auth\";\nimport \"semantic-ui-css/semantic.min.css\";\nimport CustomLayout from \"./containers/Layout\";\nimport * as messageActions from \"./store/actions/message\";\nimport WebSocketInstance from \"./websocket\";\n\nclass App extends Component {\n\n  componentDidMount() {\n    if (!this.props.isAuthenticated) {\n      this.props.onTryAutoSignup();\n    }\n  }\n\n  constructor(props) {\n    super(props);\n    WebSocketInstance.addCallbacks(\n      this.props.setMessages.bind(this),\n      this.props.addMessage.bind(this)\n    );\n  }\n\n  render() {\n    return (\n      <Router>\n        <CustomLayout {...this.props}>\n          <BaseRouter/>\n        </CustomLayout>\n      </Router>\n    );\n  }\n\n}\n\nconst mapStateToProps = state => {\n  return {\n    isAuthenticated: state.auth.token !== null,\n  };\n};\n\nconst mapDispatchToProps = dispatch => {\n  return {\n    onTryAutoSignup: () => dispatch(actions.authCheckState()),\n    setProfile: (username, watchtime, username_color) => dispatch(actions.authUpdate(username, watchtime, username_color)),\n    addMessage: message => dispatch(messageActions.addMessage(message)),\n    setMessages: messages => dispatch(messageActions.setMessages(messages))\n  };\n};\n\nexport default connect(\n  mapStateToProps,\n  mapDispatchToProps\n)(App);","import axios from \"axios\";\nimport * as actionTypes from \"./actionTypes\";\nimport { HOST_URL } from \"../../settings\";\n\nexport const addMessage = message => {\n  return {\n    type: actionTypes.ADD_MESSAGE,\n    message: message\n  };\n};\n\nexport const setMessages = (username, watchtime, username_color) => {\n  return {\n    type: actionTypes.SET_MESSAGES,\n    username: username,\n    watchtime: watchtime,\n    username_color: username_color,\n  };\n};\n\nconst getUserChatsSuccess = chats => {\n  return {\n    type: actionTypes.GET_CHATS_SUCCESS,\n    chats: chats\n  };\n};\n\nexport const getUserChats = (username, token) => {\n  return dispatch => {\n    axios.defaults.xsrfHeaderName = \"X-CSRFTOKEN\";\n    axios.defaults.xsrfCookieName = \"csrftoken\";\n    axios.defaults.headers = {\n      \"Content-Type\": \"application/json\"\n    };\n    axios\n      .get(`${HOST_URL}/api/auth/?username=${username}`)\n      .then(res => dispatch(getUserChatsSuccess(res.data)));\n  };\n};","// This optional code is used to register a service worker.\n// register() is not called by default.\n\n// This lets the app load faster on subsequent visits in production, and gives\n// it offline capabilities. However, it also means that developers (and users)\n// will only see deployed updates on subsequent visits to a page, after all the\n// existing tabs open on the page have been closed, since previously cached\n// resources are updated in the background.\n\n// To learn more about the benefits of this model and instructions on how to\n// opt-in, read https://bit.ly/CRA-PWA\n\nconst isLocalhost = Boolean(\n  window.location.hostname === 'localhost' ||\n    // [::1] is the IPv6 localhost address.\n    window.location.hostname === '[::1]' ||\n    // 127.0.0.0/8 are considered localhost for IPv4.\n    window.location.hostname.match(\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\n    )\n);\n\nexport function register(config) {\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\n    // The URL constructor is available in all browsers that support SW.\n    const publicUrl = new URL(process.env.PUBLIC_URL, window.location.href);\n    if (publicUrl.origin !== window.location.origin) {\n      // Our service worker won't work if PUBLIC_URL is on a different origin\n      // from what our page is served on. This might happen if a CDN is used to\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\n      return;\n    }\n\n    window.addEventListener('load', () => {\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\n\n      if (isLocalhost) {\n        // This is running on localhost. Let's check if a service worker still exists or not.\n        checkValidServiceWorker(swUrl, config);\n\n        // Add some additional logging to localhost, pointing developers to the\n        // service worker/PWA documentation.\n        navigator.serviceWorker.ready.then(() => {\n          console.log(\n            'This web app is being served cache-first by a service ' +\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\n          );\n        });\n      } else {\n        // Is not localhost. Just register service worker\n        registerValidSW(swUrl, config);\n      }\n    });\n  }\n}\n\nfunction registerValidSW(swUrl, config) {\n  navigator.serviceWorker\n    .register(swUrl)\n    .then(registration => {\n      registration.onupdatefound = () => {\n        const installingWorker = registration.installing;\n        if (installingWorker == null) {\n          return;\n        }\n        installingWorker.onstatechange = () => {\n          if (installingWorker.state === 'installed') {\n            if (navigator.serviceWorker.controller) {\n              // At this point, the updated precached content has been fetched,\n              // but the previous service worker will still serve the older\n              // content until all client tabs are closed.\n              console.log(\n                'New content is available and will be used when all ' +\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\n              );\n\n              // Execute callback\n              if (config && config.onUpdate) {\n                config.onUpdate(registration);\n              }\n            } else {\n              // At this point, everything has been precached.\n              // It's the perfect time to display a\n              // \"Content is cached for offline use.\" message.\n              console.log('Content is cached for offline use.');\n\n              // Execute callback\n              if (config && config.onSuccess) {\n                config.onSuccess(registration);\n              }\n            }\n          }\n        };\n      };\n    })\n    .catch(error => {\n      console.error('Error during service worker registration:', error);\n    });\n}\n\nfunction checkValidServiceWorker(swUrl, config) {\n  // Check if the service worker can be found. If it can't reload the page.\n  fetch(swUrl, {\n    headers: { 'Service-Worker': 'script' },\n  })\n    .then(response => {\n      // Ensure service worker exists, and that we really are getting a JS file.\n      const contentType = response.headers.get('content-type');\n      if (\n        response.status === 404 ||\n        (contentType != null && contentType.indexOf('javascript') === -1)\n      ) {\n        // No service worker found. Probably a different app. Reload the page.\n        navigator.serviceWorker.ready.then(registration => {\n          registration.unregister().then(() => {\n            window.location.reload();\n          });\n        });\n      } else {\n        // Service worker found. Proceed as normal.\n        registerValidSW(swUrl, config);\n      }\n    })\n    .catch(() => {\n      console.log(\n        'No internet connection found. App is running in offline mode.'\n      );\n    });\n}\n\nexport function unregister() {\n  if ('serviceWorker' in navigator) {\n    navigator.serviceWorker.ready\n      .then(registration => {\n        registration.unregister();\n      })\n      .catch(error => {\n        console.error(error.message);\n      });\n  }\n}\n","export const updateObject = (oldObject, updatedProperties) => {\n  return {\n    ...oldObject,\n    ...updatedProperties\n  }\n};","import * as actionTypes from \"../actions/actionTypes\";\nimport { updateObject } from \"../utility\";\n\nconst initialState = {\n  messages: [],\n  chats: [],\n  username: null,\n  watchtime: null,\n  wallet: []\n};\n\nconst addMessage = (state, action) => {\n  return updateObject(state, {\n    messages: [...state.messages, action.message]\n  });\n};\n\nconst setMessages = (state, action) => {\n  return updateObject(state, {\n    username: action.username,\n    watchtime: action.watchtime,\n    wallet: action.wallet\n  });\n};\n\nconst setChats = (state, action) => {\n  return updateObject(state, {\n    chats: action.chats\n  });\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case actionTypes.ADD_MESSAGE:\n      return addMessage(state, action);\n    case actionTypes.SET_MESSAGES:\n      return setMessages(state, action);\n    case actionTypes.GET_CHATS_SUCCESS:\n      return setChats(state, action);\n    default:\n      return state;\n  }\n};\n\nexport default reducer;","import * as actionTypes from \"../actions/actionTypes\";\nimport { updateObject } from \"../utility\";\n\nconst initialState = {\n  token: null,\n  error: null,\n  loading: false,\n  username: null,\n  watchtime: null,\n  userID: null,\n  username_color: null,\n  roleID: null\n};\n\nconst authStart = (state, action) => {\n  return updateObject(state, {\n    error: null,\n    loading: true\n  });\n};\n\nconst authSuccess = (state, action) => {\n  return updateObject(state, {\n    token: action.token,\n    error: null,\n    loading: false,\n    username: action.username,\n    watchtime: action.watchtime,\n    userID: action.userID,\n    username_color: action.username_color,\n    roleID: action.roleID\n  });\n};\n\nconst authFail = (state, action) => {\n  return updateObject(state, {\n    error: action.error,\n    loading: false\n  });\n};\n\nconst authLogout = (state, action) => {\n  return updateObject(state, {\n    token: null,\n    username: null,\n    watchtime: null,\n    userID: null,\n    username_color: null,\n    roleID: null\n  });\n};\n\nconst authUpdate = (state, action) => {\n  return updateObject(state, {\n    username: action.username,\n    watchtime: action.watchtime,\n    username_color: action.username_color\n  });\n};\n\nconst reducer = (state = initialState, action) => {\n  switch (action.type) {\n    case actionTypes.AUTH_START:\n      return authStart(state, action);\n    case actionTypes.AUTH_SUCCESS:\n      return authSuccess(state, action);\n    case actionTypes.AUTH_FAIL:\n      return authFail(state, action);\n    case actionTypes.AUTH_LOGOUT:\n      return authLogout(state, action);\n    case actionTypes.AUTH_UPDATE:\n      return authUpdate(state, action);\n    default:\n      return state;\n  }\n};\n\nexport default reducer;","import React from 'react';\nimport ReactDOM from 'react-dom';\nimport App from './App';\nimport * as serviceWorker from './serviceWorker';\nimport { createStore, compose, applyMiddleware, combineReducers } from \"redux\";\nimport { Provider } from \"react-redux\";\nimport thunk from \"redux-thunk\";\nimport messageReducer from \"./store/reducers/message\";\n\nimport authReducer from \"./store/reducers/auth\";\n\nconst composeEnhances = window.__REDUX_DEVTOOLS_EXTENSION_COMPOSE__ || compose;\n\nconst rootReducer = combineReducers({\n  auth: authReducer,\n  message: messageReducer\n});\n\nconst store = createStore(rootReducer, composeEnhances(applyMiddleware(thunk)));\n\nconst app = (\n  <Provider store={store}>\n    <App />\n  </Provider>\n);\n\nReactDOM.render(app, document.getElementById('root'));\nserviceWorker.unregister();\n"],"sourceRoot":""}